<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiNKR Pickleball Americano Tournament</title>
    <!-- Working CDN URLs -->
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif; 
            background: #325682; 
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            touch-action: manipulation;
            padding-bottom: 60px; /* Extra space for mobile scrolling */
        }
        .btn { 
            border: none; 
            border-radius: 8px; 
            font-weight: bold; 
            cursor: pointer; 
            transition: all 0.2s; 
            touch-action: manipulation;
        }
        .btn:hover { transform: translateY(-1px); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .input { 
            border: 2px solid #64748b; 
            border-radius: 4px; 
            padding: 12px; 
            font-size: 16px; 
            outline: none;
            touch-action: manipulation;
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }
        .input:focus { border-color: #deff01; }
        .input::-webkit-outer-spin-button,
        .input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .card { 
            background: rgba(255, 255, 255, 0.1); 
            backdrop-filter: blur(10px); 
            border-radius: 12px; 
            padding: 20px; 
            margin: 16px auto;
            width: 100%;
        }
        .error-message {
            background: #fed7d7;
            color: #9b2c2c;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
        }
        .success-message {
            background: #c6f6d5;
            color: #276749;
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #deff01;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Clickable player styles */
        .clickable-player {
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .clickable-player:hover {
            background-color: #4a6fa5 !important;
            transform: scale(1.02);
        }
        .clickable-player.selected {
            background-color: #deff01 !important;
            color: #1a202c !important;
        }
        
        /* Player replacement dropdown */
        .player-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #325682;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .player-option {
            padding: 12px;
            cursor: pointer;
            border-bottom: 1px solid #e2e8f0;
            color: #1a202c;
            transition: background-color 0.2s;
        }
        
        .player-option:hover {
            background-color: #f8f9fa;
        }
        
        .player-option.unavailable {
            background-color: #fee;
            color: #999;
            cursor: not-allowed;
        }
        
        /* Number input with controls */
        .number-input-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .number-input-btn {
            background: #deff01;
            color: #1a202c;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 6px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .number-input-btn:hover {
            background: #c5d601;
            transform: translateY(-1px);
        }
        
        .number-input-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }
        
        /* DiNKR Logo Styling */
        .dinkr-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        .dinkr-tagline {
            font-size: 12px;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 4px;
        }

        /* Ensure smooth scrolling on mobile */
        html { scroll-behavior: smooth; }
        
        /* Main container centering */
        .container {
            max-width: 400px; /* Optimized for mobile */
            margin: 0 auto;
            padding: 20px;
        }
        
        .wide-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Court styling improvements */
        .court-container {
            background: #f7fafc;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            display: grid;
            grid-template-columns: 2fr 1fr 4px 1fr 2fr;
            border: 4px solid white;
            border-radius: 4px;
        }
        
        .court-team {
            display: grid;
            grid-template-rows: 1fr 1fr;
        }
        
        .court-team.left {
            border-right: 4px solid white;
        }
        
        .court-team.right {
            border-left: 4px solid white;
        }
        
        .court-player {
            background-color: #325682;
            color: white;
            text-align: center;
            padding: 24px 16px;
            fontSize: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .court-player.top {
            border-bottom: 4px solid white;
        }
        
        .court-score-input {
            width: 52px;
            height: 52px;
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            border: none;
            background-color: white;
            outline: none;
            border-radius: 4px;
            touch-action: manipulation;
        }
        
        .court-score-input:disabled {
            background-color: #f3f4f6;
            color: #9ca3af;
            cursor: not-allowed;
        }
        
        /* Prevent zoom on double-tap for inputs */
        input[type="tel"], input[type="text"], input[type="number"], select {
            font-size: 16px;
            transform: translateZ(0);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
        const { useState, useCallback, useEffect, createElement: h } = React;
        
        // DiNKR Logo Component
        const DiNKRLogo = ({ size = 'normal' }) => {
            const logoSize = size === 'large' ? 80 : 60;
            const textSize = size === 'large' ? '36px' : '28px';
            
            return h('div', { 
                style: { textAlign: 'center', marginBottom: '24px' } 
            }, [
                h('div', { 
                    key: 'logo',
                    className: 'dinkr-logo' 
                }, [
                    h('div', { 
                        key: 'icon',
                        style: {
                            width: logoSize + 'px',
                            height: logoSize + 'px',
                            background: '#deff01',
                            borderRadius: '50%',
                            display: 'flex',
                            alignItems: 'center',
                            justifyContent: 'center',
                            fontSize: Math.round(logoSize * 0.5) + 'px'
                        }
                    }, 'ðŸ“'),
                    h('div', { key: 'text' }, [
                        h('div', { 
                            key: 'title',
                            style: {
                                fontSize: textSize,
                                fontWeight: 'bold',
                                color: '#deff01',
                                letterSpacing: '2px'
                            }
                        }, 'DiNKR'),
                        h('div', { 
                            key: 'tagline',
                            className: 'dinkr-tagline' 
                        }, 'MEET YOUR MATCH')
                    ])
                ])
            ]);
        };
        
        const Trophy = ({ size = 24 }) => {
            return h('div', {
                style: {
                    width: size + 'px',
                    height: size + 'px',
                    backgroundColor: '#deff01',
                    borderRadius: '50%',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    fontSize: Math.round(size * 0.6) + 'px'
                }
            }, 'ðŸ†');
        };
        
        const ChevronLeft = ({ size = 24 }) => {
            return h('div', {
                style: {
                    width: size + 'px',
                    height: size + 'px',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    fontSize: Math.round(size * 0.8) + 'px',
                    color: 'white'
                }
            }, 'â†');
        };

        const CheckCircle = ({ size = 24 }) => {
            return h('div', {
                style: {
                    width: size + 'px',
                    height: size + 'px',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    fontSize: Math.round(size * 0.8) + 'px',
                    color: 'white'
                }
            }, 'âœ“');
        };

        // Number Input Component with +/- buttons
        const NumberInput = ({ value, onChange, min = 1, max = 100, label, helpText, style = {} }) => {
            const increment = () => {
                if (value < max) {
                    onChange(value + 1);
                }
            };

            const decrement = () => {
                if (value > min) {
                    onChange(value - 1);
                }
            };

            const handleInputChange = (e) => {
                const newValue = parseInt(e.target.value) || min;
                const clampedValue = Math.max(min, Math.min(max, newValue));
                onChange(clampedValue);
            };

            return h('div', { style: { marginBottom: '20px' } }, [
                h('label', { 
                    key: 'label',
                    style: { display: 'block', fontSize: '16px', fontWeight: '500', marginBottom: '8px', color: 'white' } 
                }, label),
                h('div', {
                    key: 'input-container',
                    className: 'number-input-container'
                }, [
                    h('button', {
                        key: 'decrement',
                        onClick: decrement,
                        disabled: value <= min,
                        className: 'number-input-btn',
                        type: 'button'
                    }, 'âˆ’'),
                    h('input', { 
                        key: 'input',
                        type: 'number', 
                        min, 
                        max, 
                        value, 
                        onChange: handleInputChange,
                        className: 'input', 
                        style: { 
                            width: '100px',
                            textAlign: 'center',
                            backgroundColor: 'rgba(255, 255, 255, 0.15)', 
                            border: '2px solid rgba(255, 255, 255, 0.3)', 
                            color: 'white',
                            fontSize: '16px',
                            ...style
                        } 
                    }),
                    h('button', {
                        key: 'increment',
                        onClick: increment,
                        disabled: value >= max,
                        className: 'number-input-btn',
                        type: 'button'
                    }, '+')
                ]),
                helpText ? h('p', { 
                    key: 'help',
                    style: { fontSize: '14px', color: '#94a3b8', marginTop: '6px' } 
                }, helpText) : null
            ]);
        };

        // Enhanced Court Component with Improved Styling
        const Court = ({ match, matchIndex, roundIndex, courtNumber, scores, updateScore, onScoreValidation, allowPlayerEditing = false, onPlayerClick, roundStarted = true }) => {
            const [teamA, teamB] = match;
            const matchScores = scores[roundIndex]?.[matchIndex] || { teamA: '', teamB: '' };

            const handleScoreChange = (team, value) => {
                if (!roundStarted) return; // Don't allow score changes until round starts
                
                // Always update the display immediately
                updateScore(roundIndex, matchIndex, team, value);
                
                // Only validate if both scores are complete (not partial entries)
                const otherTeam = team === 'teamA' ? 'teamB' : 'teamA';
                const otherScore = team === 'teamA' ? matchScores.teamB : matchScores.teamA;
                
                // Get current scores
                const currentTeamAScore = team === 'teamA' ? value : otherScore;
                const currentTeamBScore = team === 'teamB' ? value : otherScore;
                
                // Only validate if both scores exist and are 2+ digits or complete entries
                if (currentTeamAScore && currentTeamBScore && 
                    currentTeamAScore.length >= 1 && currentTeamBScore.length >= 1) {
                    
                    const scoreA = parseInt(currentTeamAScore) || 0;
                    const scoreB = parseInt(currentTeamBScore) || 0;
                    
                    // Only validate if user seems done typing (both scores >= 10 or one is clearly final)
                    const bothScoresLookFinal = (scoreA >= 10 || scoreB >= 10) || 
                                              (scoreA > 0 && scoreB > 0 && 
                                               currentTeamAScore.length >= 2 && currentTeamBScore.length >= 2);
                    
                    if (bothScoresLookFinal && scoreA < 11 && scoreB < 11 && (scoreA > 0 || scoreB > 0)) {
                        // Add small delay to avoid validating while typing
                        setTimeout(() => {
                            const finalA = parseInt(scores[roundIndex]?.[matchIndex]?.teamA) || 0;
                            const finalB = parseInt(scores[roundIndex]?.[matchIndex]?.teamB) || 0;
                            if (finalA < 11 && finalB < 11 && (finalA > 0 || finalB > 0)) {
                                onScoreValidation(roundIndex, matchIndex, finalA, finalB);
                            }
                        }, 1000);
                    }
                }
            };

            const renderPlayer = (player, team, position) => {
                const playerStyle = {
                    backgroundColor: '#325682',
                    color: 'white',
                    textAlign: 'center',
                    padding: '24px 16px',
                    fontSize: '18px',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center'
                };

                if (position === 0) {
                    playerStyle.borderBottom = '4px solid white';
                }

                if (allowPlayerEditing) {
                    playerStyle.cursor = 'pointer';
                    playerStyle.transition = 'all 0.2s';
                }

                return h('div', {
                    key: `player-${team}-${position}`,
                    style: playerStyle,
                    onClick: allowPlayerEditing ? () => onPlayerClick(player) : undefined,
                    className: allowPlayerEditing ? 'clickable-player' : ''
                }, player.firstName || player.name);
            };

            return h('div', { style: { margin: '0 auto 24px', maxWidth: '100%', width: '100%' } }, [
                h('div', { key: 'top-post', style: { display: 'flex', justifyContent: 'center', marginBottom: '4px' } },
                    h('div', { style: { width: '8px', height: '16px', backgroundColor: '#000' } })
                ),
                h('div', { 
                    key: 'court', 
                    style: { 
                        backgroundColor: '#f7fafc', 
                        boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)', 
                        display: 'grid', 
                        gridTemplateColumns: '2fr 1fr 4px 1fr 2fr', 
                        border: '4px solid white',
                        borderRadius: '4px',
                        width: '100%',
                        maxWidth: '380px',
                        margin: '0 auto'
                    } 
                }, [
                    h('div', { 
                        key: 'left-team', 
                        style: { 
                            display: 'grid', 
                            gridTemplateRows: '1fr 1fr', 
                            borderRight: '4px solid white' 
                        } 
                    }, [
                        renderPlayer(teamA[0], 'A', 0),
                        renderPlayer(teamA[1], 'A', 1)
                    ]),
                    h('div', { key: 'left-score', style: { backgroundColor: '#a0aec0', display: 'flex', alignItems: 'center', justifyContent: 'center' } },
                        h('input', {
                            type: 'tel',
                            inputMode: 'numeric',
                            value: matchScores.teamA,
                            disabled: !roundStarted,
                            onChange: (e) => {
                                const value = e.target.value.replace(/[^0-9]/g, '');
                                const numValue = parseInt(value) || 0;
                                if (value === '' || numValue <= 15) {
                                    handleScoreChange('teamA', value);
                                }
                            },
                            onFocus: (e) => { e.target.select(); },
                            style: { 
                                width: '52px', 
                                height: '52px', 
                                textAlign: 'center', 
                                fontSize: '22px', 
                                fontWeight: 'bold', 
                                border: 'none', 
                                backgroundColor: roundStarted ? 'white' : '#f3f4f6', 
                                color: roundStarted ? 'black' : '#9ca3af',
                                outline: 'none', 
                                borderRadius: '4px', 
                                touchAction: 'manipulation',
                                cursor: roundStarted ? 'text' : 'not-allowed'
                            },
                            placeholder: roundStarted ? '0' : 'â€”'
                        })
                    ),
                    h('div', { key: 'net', style: { backgroundColor: '#000' } }),
                    h('div', { key: 'right-score', style: { backgroundColor: '#a0aec0', display: 'flex', alignItems: 'center', justifyContent: 'center' } },
                        h('input', {
                            type: 'tel',
                            inputMode: 'numeric',
                            value: matchScores.teamB,
                            disabled: !roundStarted,
                            onChange: (e) => {
                                const value = e.target.value.replace(/[^0-9]/g, '');
                                const numValue = parseInt(value) || 0;
                                if (value === '' || numValue <= 15) {
                                    handleScoreChange('teamB', value);
                                }
                            },
                            onFocus: (e) => { e.target.select(); },
                            style: { 
                                width: '52px', 
                                height: '52px', 
                                textAlign: 'center', 
                                fontSize: '22px', 
                                fontWeight: 'bold', 
                                border: 'none', 
                                backgroundColor: roundStarted ? 'white' : '#f3f4f6', 
                                color: roundStarted ? 'black' : '#9ca3af',
                                outline: 'none', 
                                borderRadius: '4px', 
                                touchAction: 'manipulation',
                                cursor: roundStarted ? 'text' : 'not-allowed'
                            },
                            placeholder: roundStarted ? '0' : 'â€”'
                        })
                    ),
                    h('div', { 
                        key: 'right-team', 
                        style: { 
                            display: 'grid', 
                            gridTemplateRows: '1fr 1fr', 
                            borderLeft: '4px solid white' 
                        } 
                    }, [
                        renderPlayer(teamB[0], 'B', 0),
                        renderPlayer(teamB[1], 'B', 1)
                    ])
                ]),
                h('div', { key: 'bottom-post', style: { display: 'flex', justifyContent: 'center', marginTop: '4px' } },
                    h('div', { style: { width: '8px', height: '16px', backgroundColor: '#000' } })
                ),
                h('div', { key: 'court-number', style: { textAlign: 'center', marginTop: '12px' } },
                    h('span', { style: { backgroundColor: '#deff01', color: '#1a202c', fontWeight: 'bold', padding: '8px 16px', fontSize: '18px', borderRadius: '4px' } }, `Court ${courtNumber}`)
                )
            ]);
        };

        // Main Tournament App Component - Simplified Version
        const TournamentApp = () => {
            const [step, setStep] = useState(1);
            const [config, setConfig] = useState({
                courts: 2, 
                totalPlayers: 8, 
                rounds: 6, 
                useDefaults: true,
                avoidMMvsFF: true, 
                useRatingBalance: true, 
                ratingFactor: 3, 
                roundDuration: 13
            });
            const [tournament, setTournament] = useState(null);
            const [loading, setLoading] = useState(false);
            const [errorMessage, setErrorMessage] = useState('');
            const [successMessage, setSuccessMessage] = useState('');

            const showError = (message) => {
                setErrorMessage(message);
                setTimeout(() => setErrorMessage(''), 5000);
            };

            const showSuccess = (message) => {
                setSuccessMessage(message);
                setTimeout(() => setSuccessMessage(''), 3000);
            };

            const generateTournament = async () => {
                setLoading(true);
                setErrorMessage('');
                
                try {
                    const requestData = {
                        courts: config.courts,
                        players: [],
                        rounds: config.rounds,
                        useDefaults: config.useDefaults,
                        avoidMMvsFF: config.avoidMMvsFF,
                        useRatingBalance: config.useRatingBalance,
                        ratingFactor: config.ratingFactor,
                        roundDuration: config.roundDuration,
                        totalPlayers: config.totalPlayers
                    };

                    const response = await fetch('/api/generate_tournament', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(requestData)
                    });

                    const result = await response.json();

                    if (response.ok && result.success) {
                        setTournament(result);
                        showSuccess('Tournament generated successfully!');
                        setStep(2);
                    } else {
                        showError(result.error || 'Failed to generate tournament');
                    }
                } catch (error) {
                    showError('Network error: ' + error.message);
                } finally {
                    setLoading(false);
                }
            };

            // Step 1: Configuration
            if (step === 1) {
                return h('div', { 
                    style: { 
                        minHeight: '100vh', 
                        background: '#325682', 
                        color: 'white',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        padding: '24px'
                    } 
                }, [
                    h('div', {
                        key: 'container',
                        style: {
                            width: '100%',
                            maxWidth: '600px'
                        }
                    }, [
                        h(DiNKRLogo, { key: 'logo' }),
                        
                        errorMessage ? h('div', { key: 'error', className: 'error-message' }, errorMessage) : null,
                        successMessage ? h('div', { key: 'success', className: 'success-message' }, successMessage) : null,
                        
                        h('div', { key: 'config', className: 'card' }, [
                            h('h3', { 
                                key: 'title', 
                                style: { fontSize: '20px', fontWeight: '600', marginBottom: '20px', color: '#deff01', textAlign: 'center' } 
                            }, 'Tournament Configuration'),
                            h('div', { 
                                key: 'fields', 
                                style: { display: 'flex', flexDirection: 'column', gap: '20px' } 
                            }, [
                                h(NumberInput, {
                                    key: 'courts',
                                    value: config.courts,
                                    onChange: (value) => setConfig(prev => ({...prev, courts: value})),
                                    min: 1,
                                    max: 10,
                                    label: 'Number of Courts'
                                }),
                                h(NumberInput, {
                                    key: 'players',
                                    value: config.totalPlayers,
                                    onChange: (value) => setConfig(prev => ({...prev, totalPlayers: value})),
                                    min: 4,
                                    max: 100,
                                    label: 'Number of Players',
                                    helpText: `Supports any number of players. ${config.courts * 4} will play each round.`
                                }),
                                h(NumberInput, {
                                    key: 'rounds',
                                    value: config.rounds,
                                    onChange: (value) => setConfig(prev => ({...prev, rounds: value})),
                                    min: 3,
                                    max: 15,
                                    label: 'Number of Rounds'
                                }),
                                h(NumberInput, {
                                    key: 'duration',
                                    value: config.roundDuration,
                                    onChange: (value) => setConfig(prev => ({...prev, roundDuration: value})),
                                    min: 10,
                                    max: 15,
                                    label: 'Round Duration (minutes)',
                                    helpText: 'Range: 10-15 minutes (default: 13)'
                                })
                            ])
                        ]),
                        
                        loading ? h('div', { key: 'loading', className: 'spinner' }) : null,
                        
                        h('button', { 
                            key: 'generate', 
                            onClick: generateTournament, 
                            disabled: loading, 
                            className: 'btn', 
                            style: { 
                                width: '100%', 
                                backgroundColor: loading ? '#64748b' : '#deff01', 
                                color: '#1e293b', 
                                padding: '18px', 
                                fontSize: '18px',
                                fontWeight: 'bold',
                                borderRadius: '12px'
                            } 
                        }, loading ? 'Generating Tournament...' : 'Generate Tournament')
                    ])
                ]);
            }

            // Step 2: Tournament Display (Simplified)
            if (step === 2 && tournament) {
                const currentRoundData = tournament.schedule[0]; // Show first round

                return h('div', { style: { minHeight: '100vh', background: '#325682' } }, [
                    h('div', { key: 'header', style: { backgroundColor: '#1a202c', color: 'white', padding: '8px 16px', position: 'sticky', top: 0, zIndex: 10 } },
                        h('div', { style: { display: 'flex', alignItems: 'center', justifyContent: 'space-between' } }, [
                            h('button', { key: 'back', onClick: () => setStep(1), style: { padding: '4px', backgroundColor: 'transparent', border: 'none', color: 'white', cursor: 'pointer', borderRadius: '4px' } }, h(ChevronLeft, { size: 20 })),
                            h('h2', { key: 'title', style: { fontSize: '18px', fontWeight: 'bold', color: '#deff01' } }, `ROUND 1`),
                            h('div', { key: 'spacer', style: { width: '28px' } })
                        ])
                    ),
                    
                    h('div', { key: 'content-container', className: 'container' }, [
                        errorMessage ? h('div', { key: 'error', className: 'error-message' }, errorMessage) : null,
                        successMessage ? h('div', { key: 'success', className: 'success-message' }, successMessage) : null,
                        
                        h('div', { 
                            key: 'info',
                            style: { 
                                backgroundColor: 'rgba(222, 255, 1, 0.2)', 
                                border: '2px solid #deff01', 
                                borderRadius: '8px', 
                                padding: '16px', 
                                marginBottom: '24px', 
                                color: '#fef5e7',
                                textAlign: 'center'
                            } 
                        }, [
                            h('h3', { 
                                key: 'title',
                                style: { fontSize: '18px', fontWeight: 'bold', marginBottom: '8px' } 
                            }, 'ðŸ“ Tournament Generated Successfully!'),
                            h('p', { 
                                key: 'description',
                                style: { fontSize: '14px' } 
                            }, `Generated ${tournament.schedule.length} rounds with ${tournament.players.length} players on ${config.courts} courts.`)
                        ]),
                        
                        // Show first round matches
                        ...currentRoundData.matches.map((match, matchIndex) => 
                            h(Court, { 
                                key: matchIndex, 
                                match, 
                                matchIndex, 
                                roundIndex: 0, 
                                courtNumber: matchIndex + 1,
                                scores: {},
                                updateScore: () => {},
                                onScoreValidation: () => {},
                                allowPlayerEditing: false,
                                roundStarted: false
                            })
                        ),
                        
                        // Show sit outs
                        currentRoundData.sit_outs && currentRoundData.sit_outs.length > 0 ? h('div', { 
                            key: 'sitouts', 
                            style: { 
                                backgroundColor: 'rgba(107, 114, 128, 0.5)', 
                                padding: '16px', 
                                borderRadius: '8px', 
                                marginBottom: '24px', 
                                color: 'white' 
                            } 
                        }, [
                            h('strong', { style: { color: '#deff01' } }, 'Sitting Out: '), 
                            h('span', {}, currentRoundData.sit_outs.join(', '))
                        ]) : null
                    ])
                ]);
            }

            // Loading state
            return h('div', { 
                style: { 
                    padding: '40px', 
                    textAlign: 'center', 
                    minHeight: '100vh', 
                    background: '#325682', 
                    color: 'white',
                    display: 'flex',
                    flexDirection: 'column',
                    alignItems: 'center',
                    justifyContent: 'center'
                } 
            }, [
                h(DiNKRLogo, { key: 'logo', size: 'large' }),
                h('h2', { style: { marginBottom: '20px' } }, 'Loading Tournament System...'),
                h('div', { className: 'spinner' })
            ]);
        };

        ReactDOM.render(React.createElement(TournamentApp), document.getElementById('root'));
    </script>
</body>
</html>